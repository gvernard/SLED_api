{% extends "modal_base.html" %}

{% block title %}
Give access to Users and Groups?
{% endblock title %}


{% block content %}
<input type="hidden" id="Urlusers" data-url="{% url 'api:users-view' %}" />
<input type="hidden" id="Urlgroups" data-url="{% url 'api:groups-view' %}" />

<div class="{% if form.non_field_errors %}invalid{% endif %}">
  {% for error in form.non_field_errors %}
  {{ error }}
  {% endfor %}
</div>

<div>
  {{ form.users }}
</div>

<br>

<div>
  {{ form.groups }}
</div>

<div>
  <table>
    {% for lens in lenses %}
    <tr>
      <td>
	{{ lens }}
      </td>
      <td>
	{{ lens.getUsersWithAccessNoOwner|join:"," }} - <em>{{ lens.getGroupsWithAccessNoOwner|join:"," }}</em>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>

{{ form.ids }}
{% endblock content %}


{% block action_button %}
<button type="submit" class="btn btn-sm btn-danger">Give access</button>
{% endblock action_button %}


{% block extrascripts %}
<script>
  users_autocomplete("id_users");
  groups_autocomplete("id_groups");
</script>
{% endblock extrascripts %}
