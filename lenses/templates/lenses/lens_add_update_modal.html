{% extends 'modal_base.html' %}
{% load static %}

{% block title %}
Update Lens {{ lens.name }}
{% endblock title %}


{% block content %}
<div class="jb-container-modal">

  {% if form.non_field_errors|length > 0 %}
  <div class="invalid jb-modal-field">
    <ul>
      {% for error in form.non_field_errors %}
      <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  
  <div class="jb-table-no-lines">
    {{ form.owner }}
    {{ form.access_level }}

    
    <table class="jb-add-lens">
      <tr>
        <!-- First column -->
        <td>
          <div>
            <table>
              <tr>
                <td>{{ form.name.errors }}</td>
                <td>
      <div class="sled-help-tooltip">{{ form.name.label|safe }}</div>
      <div class="sled-help-tooltip-content">{{ form.name.help_text|safe }}</div>
    </td>
                <td>{{ form.name }}</td>
              </tr>
              <tr>
                  <td>{{ form.alt_name.errors }}</td>
                  <td>
        <div class="sled-help-tooltip">{{ form.alt_name.label|safe }}</div>
        <div class="sled-help-tooltip-content">{{ form.alt_name.help_text|safe }}</div>
      </td>
                  <td>{{ form.alt_name }}</td>
                </tr>
              <tr>
                <td>{{ form.ra.errors }}</td>
                <td>
      <div class="sled-help-tooltip">{{ form.ra.label|safe }}</div>
      <div class="sled-help-tooltip-content">{{ form.ra.help_text|safe }}</div>
    </td>
                <td>{{ form.ra }}</td>
              </tr>
              <tr>
                <td>{{ form.dec.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.dec.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.dec.help_text|safe }}</div>
		</td>
                <td>{{ form.dec }}</td>
              </tr>
              <tr>
                <td>{{ form.image_sep.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.image_sep.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.image_sep.help_text|safe }}</div>
		</td>
                <td>{{ form.image_sep }}</td>
              </tr>
              <tr>
                <td>{{ form.z_lens.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.z_lens.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.z_lens.help_text|safe }}</div>
		</td>
                <td>{{ form.z_lens }}</td>
              </tr>
              <tr>
                <td>{{ form.z_source.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.z_source.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.z_source.help_text|safe }}</div>
		</td>
                <td>{{ form.z_source }}</td>
              </tr>
              <tr>
                <td>{{ form.flag_confirmed.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.flag_confirmed.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.flag_confirmed.help_text|safe }}</div>
		</td>
                <td>{{ form.flag_confirmed }}</td>
              </tr>
              <tr>
                <td>{{ form.flag_contaminant.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.flag_contaminant.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.flag_contaminant.help_text|safe }}</div>
		</td>
                <td>{{ form.flag_contaminant }}</td>
              </tr>
            </table>
          </div>
        </td>
	
	
        <!-- Second column -->
        <td>
          <div>
            <table>
              <tr>
                <td>{{ form.n_img.errors }}</td>
		<td>
		  <div class="sled-help-tooltip">{{ form.n_img.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.n_img.help_text|safe }}</div>
		</td>
                <td>{{ form.n_img }}</td>
              </tr>
              <tr>
                <td>{{ form.lens_type.errors }}</td>
                <td>
		  <div class="sled-help-tooltip">{{ form.lens_type.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.lens_type.help_text|safe }}</div>
		</td>
                <td>{{ form.lens_type }}</td>
              </tr>
              <tr>
                <td>{{ form.source_type.errors }}</td>
                <td>
		  <div class="sled-help-tooltip">{{ form.source_type.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.source_type.help_text|safe }}</div>
		</td>
                <td>{{ form.source_type }}</td>
              </tr>
              <tr>
                <td>{{ form.image_conf.errors }}</td>
                <td>
		  <div class="sled-help-tooltip">{{ form.image_conf.label|safe }}</div>
		  <div class="sled-help-tooltip-content">{{ form.image_conf.help_text|safe }}</div>
		</td>
                <td>{{ form.image_conf }}</td>
              </tr>
              <tr>
                <td>{{ form.info.errors }}</td>
                <td colspan="2" style="text-align:center">{{ form.info }}</td>
              </tr>
            </table>
          </div>
        </td>
	
	
        <!-- Third column -->
        <td>
          <div>
            <table class="jb-paragraph-2">
	      <tr>
		<td colspan="1" style="text-align:center">
                  {% if form.instance.mugshot %}
                  <img class="sled-mugshot-image" src="{{ form.instance.mugshot.url }}" alt="Mugshot">
                  {% else %}
                  <img class="sled-mugshot-image" src="">
                  {% endif %}
		</td>
	      </tr>
              <tr>
                <td style="text-align:center">
		  {{ form.mugshot.errors }}
                  {{ form.mugshot }}
		</td>
              </tr>
            </table>
          </div>
        </td>
	
	
      </tr>
    </table>
  </div>
  
  
</div>
{% endblock content %}


{% block action_button %}
<button type="submit" class="jb-submit-button-1">Update</button>
{% endblock action_button %}

{% block extrastyles %}
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
{% endblock extrastyles %}



{% block extrascripts %}
<script type="text/javascript" src="{% static 'js/set_help.js' %}"></script>
{{ form.media.js }}
<script type="text/javascript">
  function readURL(input, $img) {
      if (input.files && input.files[0]) {
          var reader = new FileReader();
          reader.onload = function(e) {
              $img.attr('src', e.target.result);
          }
          reader.readAsDataURL(input.files[0]);
      }
  }
  $(document).on("change", "input[name*='mugshot']", function() {
      var $img = $(this).parent().parent().parent().find('img');
      readURL(this, $img);
  });

  set_help();
  
  $('.my-select2').select2();
</script>
{% endblock extrascripts %}
