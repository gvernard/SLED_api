{% load static %}
{% load project_tags %}

{% if stream %}


<table class="activity-all">
  <tbody>
    {% for action in stream %}
    {% with N=action.action_object.myitems.all|length %}
    
    <tr>
      <td>
	
	{% if action.verb == "Add" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} new {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	added by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "AddData" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} new {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	added by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "RemoveData" %}
	Data taken in {{ action.data.instrument }} - {{ action.data.band }} removed by
	<a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "DeletedSingleObject" %}
	NONE

	
	{% elif action.verb == "UpdateSelf" %}
	The following updates were performed on this {{ action.data.object_type }}:
	<div class="sled-dirty-fields">
	  {{ action.data.fields }}
	</div>
	at <em>{{ action.timestamp }}</em>

	
	{% elif action.verb == "UpdateData" %}
	The following updates were performed on {{ action.action_object }}:
	<div class="sled-dirty-fields">
	  {{ action.data.fields }}
	</div>
	at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "Update" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	updated by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "DeleteObject" %}
	The following {{ action.data.object_names|length }} {% singular_or_plural action.data.object_type action.data.object_names|length %}:
	<table>
	  {% for name in action.data.object_names %}
	  <tr>
            <td>name</td>
	  </tr>
	  {% endfor %}
	</table>
	{{ N|pluralize:"was,were" }} deleted by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "RemovedFromGroup" %}
	The following {{ N }} {% singular_or_plural action.action_object.item_type N %}:
	<table>
	  {% for user in action.action_object.myitems.all %}
	  <tr>
            <td><a href="{{ user.get_absolute_url }}" target="_blank">{{ user.username }}</a></td>
	  </tr>
	  {% endfor %}
	</table>
	{{ N|pluralize:"was,were" }} removed from the group at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "AddedToGroup" %}
	The following {{ N }} {% singular_or_plural action.action_object.item_type N %}:
	<table>
	  {% for user in action.action_object.myitems.all %}
	  <tr>
            <td><a href="{{ user.get_absolute_url }}" target="_blank">{{ user.username }}</a></td>
	  </tr>
	  {% endfor %}
	</table>
	{{ N|pluralize:"was,were" }} added to the group at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "LeftGroup" %}
	NONE


	{% elif action.verb == "RemovedFromCollection" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	removed from the collection at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "AddedToCollection" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	added to the collection at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "MadePublic" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural action.action_object.item_type N %}</a> {{ N|pluralize:"was,were" }}
	made <em>public</em> by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "MadePublicSelf" %}
	NONE


	{% elif action.verb == "MadePrivateSelf" %}
	NONE

	
	{% elif action.verb == "MadePublicGroup" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural action.action_object.item_type N %}</a> the group has access to {{ N|pluralize:"was,were" }}
	made public at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "RevokeAccess" %}
	The group's access was revoked from the following {{ N }} private {% singular_or_plural action.action_object.item_type N %}:
	<table>
	  {% for obj in action.action_object.myitems.all %}
	  <tr>
            <td>obj</td>
	  </tr>
	  {% endfor %}
	</table>
	by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a>	at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "GiveAccess" %}
	The group was granted access to
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural action.action_object.item_type N %}</a>
	by <a href="{{ action.actor.get_absolute_url }}" target="_blank">{{ action.actor }}</a> at <em>{{ action.timestamp }}</em>


	{% elif action.verb == "CedeOwnershipSelf" %}
	NONE

	{% elif action.verb == "CedeOwnershipPublic" %}
	NONE
	
	{% elif action.verb == "CedeOwnership" %}
	<a href="{{ action.action_object.myitems.first.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural action.action_object.item_type N %}</a> the group has access to changed owner from
	<a href="{{ action.data.previous_owner_url }}" target="_blank">{{ action.data.previous_owner }}</a> to <a href="{{ action.data.next_owner_url }}" target="_blank">{{ action.data.next_owner }}</a> at <em>{{ action.timestamp }}</em>

	
	{% elif action.verb == "NewUser" %}
	NONE

	
	{% endif %}
      </td>
    </tr>

    {% endwith %}
    {% endfor %}
  </tbody>
</table>

{% else %}
<p class="jb-homepage-activity">No activity to display</p>
{% endif %}
