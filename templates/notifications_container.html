{% load static %}
{% load project_tags %}


<style>
  .success_level {
    color: yellow;
  }
</style>


{% if notifications %}
<table class="jb-activity">
  <tbody>
    {% for note in notifications %}
    {% with N=note.action_object.myitems.all|length %}
    {% if N > 0 or note.data.object_names|length > 0 %}

    <tr class="sled-notification-row">
      <td class="{{ note.level }}_level">{{ note.level }}</td>
      <td>{{ note.timestamp }}</td>
      <td>
        {% if note.actor != "admin" %}
        by <a href="{{ note.actor.get_absolute_url }}" target="_blank">{{ note.actor }}</a>
        {% else %}
        by admin
        {% endif %}
      </td>
      <td>



        {% if note.verb == "DeleteObjectsAccepted" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>delete public</i> objects was accepted.


        {% elif note.verb == "DeleteObjectsRejected" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>delete public</i> objects was rejected.


        {% elif note.verb == "DeleteObjectsPrivate" %}
	<a class="sled-open-tooltip">{{ N }} private {% singular_or_plural note.data.object_type N %}</a> that you had access to {{ N|pluralize:"was,were" }} deleted.
        <div class="sled-notification-tooltip" style="display:none">
          <table>
            {% for name in note.data.object_names %}
            <tr>
              <td>name</td>
            </tr>
            {% endfor %}
          </table>
        </div>


        {% elif note.verb == "CedeOwnership" %}
        {{ N }} private {% singular_or_plural note.data.object_type N %} you have access to changed owner
        from <a href="{{ note.data.previous_owner_url }}" target="_blank">{{ note.data.previous_owner }}</a>
        to <a href="{{ note.data.next_owner_url }}" target="_blank">{{ note.data.next_owner }}</a>


        {% elif note.verb == "CedeOwnershipAccepted" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>cede ownership</i> was accepted.


        {% elif note.verb == "CedeOwnershipRejected" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>cede ownership</i> was rejected.


        {% elif note.verb == "MakePrivateAccepted" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>make objects private</i> was accepted.


        {% elif note.verb == "MakePrivateRejected" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>make objects private</i> was rejected.


        {% elif note.verb == "MakePublic" %}
	<a href="{{ note.action_object.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural note.data.object_type N %}</a> that you have access to {{ N|pluralize:"is,are" }} now public.


        {% elif note.verb == "AddedToGroup" %}
        Your were successfully added to the group <a href="{{ note.action_object.get_absolute_url }}" target="_blank">{{ note.action_object.name }}</a>.


        {% elif note.verb == "AskToJoinGroupRejected" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to join group <a href="{{ note.data.group_url }}" target="_blank">{{ note.data.group_name }}</a> was rejected.


        {% elif note.verb == "RemovedFromGroup" %}
        You were removed from the group <a href="{{ note.action_object.get_absolute_url }}" target="_blank">{{ note.action_object.name }}</a>.


        {% elif note.verb == "DeletedGroup" %}
        Group <b>{{ note.data.group_name }}</b> was deleted by <a href="{{ note.data.owner_url }}" target="_blank">{{ note.data.owner_name }}</a>.


        {% elif note.verb == "GiveAccess" %}
	You were given access to <a href="{{ note.action_object.get_absolute_url }}" target="_blank">{{ N }} private {% singular_or_plural note.action_object.item_type N %}</a>.


        {% elif note.verb == "RevokeAccess" %}
        Your access to <a class="sled-open-tooltip" href="">{{ N }} private {% singular_or_plural| note.action_object.item_type %}</a> was revoked.
        <div class="sled-notification-tooltip" style="display:none">
          <table>
            {% for col in note.action_object.myitems.all %}
            <tr>
              <td>{{ col.name }}</td>
            </tr>
            {% endfor %}
          </table>
        </div>


        {% elif note.verb == "AskPrivateAccessRejected" %}
        <a href="{{ note.action_object.get_absolute_url }}" target="_blank">Your request</a> to <i>access private objects</i> was accepted.


        {% elif note.verb == "RemovedFromCollection" %}
        Private {{ note.action_object.object_type|get_name_plural }} were removed from <a class="sled-open-tooltip">{{ N }} Collections</a> that you own.
        <div class="sled-notification-tooltip" style="display:none">
          <table>
            {% for col in note.action_object.myitems.all %}
            <tr>
              <td><a href="{{ col.get_absolute_url }}" target="_blank">{{ col.name }}</a></td>
            </tr>
            {% endfor %}
          </table>
        </div>



        {% endif %}
      </td>
    </tr>
    {% endif %}
    {% endwith %}
    {% endfor %}
  </tbody>
</table>

{% else %}
<p>No notifications</p>
{% endif %}
