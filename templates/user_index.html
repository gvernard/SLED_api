{% extends 'master_header.html' %}
{% block content %}

<div class="section">
  <h1>User Profile page</h1>
</div>

<!--<div class="content container">
    <div id="form_container">
      
      <form id="form_57258" class="appnitro"  method="get" action="">
        <div class="form_description">
          <p>Input Ra and Dec coordinates for more detailed search</p>
        </div>
	
        <div>
          <label class="description" for="ra_min">Ra min </label>
          <input id="ra_min" name="ra_min" class="element text medium" type="text" maxlength="255" value=""/>
          <label class="description" for="ra_max">Ra max </label>
          <input id="ra_max" name="ra_max" class="element text medium" type="text" maxlength="255" value=""/>
          <label class="description" for="dec_min">Dec min </label>
          <input id="dec_min" name="dec_min" class="element text medium" type="text" maxlength="255" value=""/>
          <label class="description" for="dec_max">Dec max </label>
          <input id="dec_max" name="dec_max" class="element text medium" type="text" maxlength="255" value=""/>
	  
          <input type="hidden" name="form_id" value="57257" />
          <input id="saveForm" class="button_text" type="submit" name="submit" value="Submit" />
          <input id="saveForm" class="button_text" type="submit" name="download" value="Download" />
        </div>
      </form>
    </div>
</div>-->

<div class="section">
  <h1>My details</h1>
</div>
<div class="content container">
  <table class="sortable">
    <tr>
      <th class="th-center">Name</th>
      <th class="th-center">Affiliation</th>    
    </tr>
    <tr>
      <td class="td-center">{{user.username}}</td>
      <td class="td-center">{{user.affiliation}}</td>
    </tr>
  </table>
</div>



<div class="section">
  <h1>My groups ({{ user.getGroupsIsMember|length }}) </h1>
</div>
<div class="content container">
  <table class="sortable">
    <tr>
      <th class="th-center">Name</th>
      <th class="th-center">Description</th>  
    </tr>
    {% for group in user.getGroupsIsMember %}
    <tr>
      <td class="td-center"><a href="{% url 'groups:group_detail' group_name=group.name %}">{{group.name}}</td>
      <td class="td-center">{{group.description}}</td>  
    </tr>
    {% endfor %}
  </table>
</div>



<div class="section">
  <h1>Pending Confirmation tasks</h1>
  {% if N_tasks > 0 %}
  <table class="sortable">
    <thead>
      <tr>
	<th>Type</th>
	<th>Created at</th>
	<th>From</th>
	<th>Receivers</th>
      </tr>
    </thead>
    <tbody>
      {% for recipients,task in pending_conf %}
      <tr>
	<td>{{ task.task_type }}</td>
	<td>{{ task.created_at }}</td>
	<td>{{ task.owner }}</td>
	<td>{{ recipients }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No pending confirmation tasks</p>
  {% endif %}
  <a href="{% url 'confirmation:list-tasks' %}">All tasks</a>
</div>


<div class="section">
  <h1>New Notifications</h1>
  {% if unread_notifications %}
  <table class="sortable">
    <thead>
      <tr>
	<th>Sender</th>
	<th>Sent at</th>
	<th>Level</th>
	<th>Verb</th>
      </tr>
    </thead>
    <tbody>
      {% for note in unread_notifications %}
      <tr>
	<td>{{ note.actor_object_id }}</td>
	<td>{{ note.timestamp }}</td>
	<td>{{ note.level }}</td>
	<td>{{ note.verb }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No new notifications</p>
  {% endif %}
   <a href="{% url 'sled-notifications:list-all' %}">All notifications</a>
</div>



<div class="section">
  <h1>My lenses ({{ lenses|length }}) </h1>
</div>

<div class="content ">
  <form id="ids-form" method="POST">
    {% include "lens_list_executive.html" with lenses=lenses %}
  </form>
</div>

<div class="controls">
  <button type="submit" form="ids-form" formaction="{% url 'lenses:lens-update' %}">Update lenses</button>
  <button type="submit" form="ids-form" formaction="{% url 'lenses:lens-give-access' %}">Give/revoke access</button>
  <button type="button" form="ids-form">Make private/public</button>
  <button type="button" form="ids-form">Cede ownership</button>
  <button type="submit" form="ids-form" formaction="{% url 'lenses:lens-delete' %}">Delete lenses</button>
</div>


<div>
  <a href="{% url 'logout'%}">LOGOUT</a>
</div>
 
{% endblock content %}
  
